<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>KFortuneHunters Kakao Redirect</title>
  <script>
    (function () {
      const fullUrl = window.location.href;
      const params = new URLSearchParams(window.location.search);
      const fragment = window.location.hash;

      const paint = () => {
        const statusEl = document.getElementById('status');
        const errorEl = document.getElementById('error');
        const urlEl = document.getElementById('raw-url');

        if (urlEl) urlEl.textContent = fullUrl;

        if (params.has('error')) {
          const err = params.get('error');
          const desc = params.get('error_description') || '';
          if (statusEl) statusEl.textContent = 'error';
          if (errorEl) errorEl.textContent = `${err}${desc ? ' - ' + desc : ''}`;
        } else if (params.has('code')) {
          if (statusEl) statusEl.textContent = `code=${params.get('code')}`;
        } else if (statusEl) {
          statusEl.textContent = 'code 파라미터가 없습니다 (취소/실패)';
        }
      };

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', paint);
      } else {
        paint();
      }

      const query = params.toString();
      const target = 'kfortune://oauth'
        + (query ? '?' + query : '')
        + (fragment ? fragment : '');

      window.location.replace(target);
      setTimeout(() => { window.location.href = target; }, 2000);
    })();
  </script>
</head>
<body style="font-size:13px; word-break:break-all;">
  <p>카카오 로그인으로 돌아가는 중…</p>
  <p><strong>Status:</strong> <span id="status">처리 중…</span></p>
  <p><strong>Error:</strong> <span id="error">없음</span></p>
  <p><strong>현재 URL:</strong> <span id="raw-url"></span></p>
</body>
</html>