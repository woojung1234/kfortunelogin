<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>KFortuneHunters Kakao Redirect</title>
  <script>
    (function () {
      const fullUrl = window.location.href;
      const params = new URLSearchParams(window.location.search);
      const fragment = window.location.hash;

      const statusEl = document.getElementById('status');
      const urlEl = document.getElementById('raw-url');
      const errorEl = document.getElementById('error');

      urlEl.textContent = fullUrl;

      if (params.has('error')) {
        errorEl.textContent = `error=${params.get('error')}, description=${params.get('error_description') || ''}`;
      } else if (params.has('code')) {
        statusEl.textContent = `code=${params.get('code')}`;
      } else {
        statusEl.textContent = 'code 파라미터가 없습니다 (취소/실패)';
      }

      const query = params.toString();
      const target = 'kfortune://oauth'
        + (query ? '?' + query : '')
        + (fragment ? fragment : '');

      window.location.replace(target);
      setTimeout(() => { window.location.href = target; }, 2000);
    })();
  </script>
</head>
<body style="font-size:13px; word-break:break-all;">
  <p>카카오 로그인으로 돌아가는 중…</p>
  <p><strong>Status:</strong> <span id="status">처리 중…</span></p>
  <p><strong>Error:</strong> <span id="error">없음</span></p>
  <p><strong>현재 URL:</strong> <span id="raw-url"></span></p>
</body>
</html>
