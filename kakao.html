<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>KFortuneHunters Kakao Redirect</title>
  <script>
    (function () {
      const fullUrl = window.location.href;
      console.log('[KAKAO REDIRECT] full URL:', fullUrl);

      document.addEventListener('DOMContentLoaded', () => {
        const urlBox = document.getElementById('raw-url');
        if (urlBox) {
          urlBox.textContent = fullUrl;
        }
      });

      const params = new URLSearchParams(window.location.search);
      const fragment = window.location.hash;

      if (params.has('error')) {
        const errorInfo = `${params.get('error')}${params.get('error_description') ? ' - ' + params.get('error_description') : ''}`;
        console.warn('[KAKAO REDIRECT] error param detected:', errorInfo);
      }

      const query = params.toString();
      const target = 'kfortune://oauth'
        + (query ? '?' + query : '')
        + (fragment ? fragment : '');

      window.location.replace(target);
      setTimeout(() => { window.location.href = target; }, 2000);
    })();
  </script>
</head>
<body>
  <p>카카오 로그인으로 돌아가는 중…</p>
  <p style="word-break: break-all; font-size: 12px;">
    현재 URL: <span id="raw-url"></span>
  </p>
</body>
</html>
